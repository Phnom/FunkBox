(this.webpackJsonpfunkbox=this.webpackJsonpfunkbox||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(10),s=n.n(c),a=n(16),i=n.n(a),r=(n(21),n(0)),l=n(1),u=n(3),o=n(2),h=(n(22),n(9)),b=n(11),d=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).eventCb=e.seqMembrane,e}return Object(l.a)(n,[{key:"seqMembrane",value:function(e,t){this.drawSequence(),this.instrument.triggerAttackRelease(t,"16n",e)}}]),n}(b.c),j=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).eventCb=e.seqNoise,e}return Object(l.a)(n,[{key:"seqNoise",value:function(e){this.drawSequence(),this.instrument.triggerAttackRelease(e)}}]),n}(b.e),m=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).eventCb=e.seqPoly,e.set({detune:-1200}),e}return Object(l.a)(n,[{key:"seqPoly",value:function(e){this.drawSequence(),this.instrument.triggerAttackRelease(["C4","E4","G4","B4"],"16n",e)}}]),n}(b.f),f=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e,c){var s;return Object(r.a)(this,n),(s=t.call(this,{urls:e,baseUrl:c||"/FunkBox"})).eventCb=s.seqSampler,s}return Object(l.a)(n,[{key:"seqSampler",value:function(e){this.drawSequence(),this.instrument.triggerAttackRelease([24],"16n",e)}}]),n}(b.g),v=function(){function e(t){var n=this;Object(r.a)(this,e),this.drawTarget=document.querySelector(t),this.animation=this.drawTarget.getContext("2d"),this.animation.moveTo(0,0),this.startButton=document.querySelector(".sample-recorder > .recorder-start-button"),this.stopButton=document.querySelector(".sample-recorder > .recorder-stop-button"),this.mic=new b.j,this.micFFT=new b.b,this.meter=new b.d,this.mic.connect(this.micFFT),this.mic.connect(this.meter),this.startButton.addEventListener("click",(function(){return n.open()})),this.stopButton.addEventListener("click",(function(){return n.close()}))}return Object(l.a)(e,[{key:"open",value:function(e){var t=this;this.mic.open().then((function(){var n=setInterval((function(){console.log(t.micFFT),console.log(t.meter.getValue()),console.log(t.micFFT.getValue()),console.log(t.drawTarget),console.log(t.animation)}),100);setTimeout((function(){clearInterval(n),t.close()}),e||2e3)}))}},{key:"close",value:function(){this.mic.close()}}]),e}(),O=function(){function e(t,n){Object(r.a)(this,e),this.drawTarget=document.querySelector(t),this.animation=this.drawTarget.getContext("2d"),this.animation.moveTo(0,0),this.eventCb=n||this.seqCanvas,this.counter=0,this.canvasLoop=new p("Main",this.eventCb,[[["C1"]],[["C1"]],[["C1"]],[["C1"]],[["C1"]],[["C1"]],[["C1"]],[["C1"]]],this,t)}return Object(l.a)(e,[{key:"seqCanvas",value:function(){var e=this;this.drawSequence(),b.i.schedule((function(t){b.a.schedule((function(){e.instrument.animation.clearRect(0,0,e.instrument.drawTarget.width,e.instrument.drawTarget.height),e.instrument.animation.beginPath(),e.instrument.animation.arc(10*e.instrument.counter,5*e.instrument.counter,2*e.instrument.counter,0,2*Math.PI),e.instrument.animation.stroke(),e.instrument.counter>30?e.instrument.counter=0:e.instrument.counter++}),t)}),"+0.05")}}]),e}(),p=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e,c,s,a,i){var l;return Object(r.a)(this,n),(l=t.call(this,c,s)).instrument=a||"No Sound",l.drawTarget=i||".blink-"+e,l.drawClass="seq-now",l.start(0),l}return Object(l.a)(n,[{key:"drawSequence",value:function(){var e=this,t=document.querySelector(this.drawTarget);b.i.schedule((function(n){b.a.schedule((function(){t.classList.contains(e.drawClass)?t.classList.add(e.drawClass+"-second"):t.classList.add(e.drawClass)}),n),b.i.schedule((function(n){b.a.schedule((function(){t.classList.remove(e.drawClass),t.classList.remove(e.drawClass+"-second")}),n)}),"+0.2")}),"+0.05")}}],[{key:"newSequence",value:function(e,t){return new n(e,t)}}]),n}(b.h),g=function(){function e(t,n){var c=this;Object(r.a)(this,e),this.changeStep=function(e){var t=c.sequence.events[e];switch(c.sequence.events[e].length){case 0:t=[["C1"]];break;case 1:t=[["C1"],["C1"]];break;case 2:t=c.sequence.events[e][0][0]?[[],["C1"]]:[["C1"],["C1"],["C1"]];break;case 3:t=c.sequence.events[e][0][0]?[[],["C1"],["C1"]]:c.sequence.events[e][1][0]?[[],[],["C1"]]:[];break;default:t=[]}c.sequence.events[e]=t},this.name=n||"",this.instrument=this.setInstrument(t),this.sequencePattern=[[],[],[],[],[],[],[],[]],this.sequence=new p(this.name,this.instrument.eventCb,this.sequencePattern,this.instrument),this.drawTarget=".blink-"+n,this.drawClass="seq-now"}return Object(l.a)(e,[{key:"setInstrument",value:function(e){switch(e){case"Membrane":return(new d).toDestination();case"Noise":return(new j).toDestination();case"Poly":return(new m).toDestination();default:return new f({24:"/Drums/asHihat01.wav"}).toDestination()}}},{key:"getInstrument",value:function(){return this.instrument}},{key:"getEventCb",value:function(){return this.eventCb}}]),e}(),x=function(){function e(t){Object(r.a)(this,e),this.mixerBus={},this.setMixer(t),this.sampleRecorder=new v("#Main-Screen"),this.canvas=new O("#Main-Screen")}return Object(l.a)(e,[{key:"setChannel",value:function(e,t){this.mixerBus[e+"Channel"]=new g(t,e)}},{key:"setMixer",value:function(e){var t,n=Object(h.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;this.setChannel(c.name,c.type)}}catch(s){n.e(s)}finally{n.f()}}},{key:"changeStep",value:function(e,t){this.mixerBus[e]?this.mixerBus[e].changeStep(t):console.log("There is no channel named "+e)}}]),e}(),C=null,w={},k=[{name:"Kick",type:"Membrane"},{name:"Noise",type:"Noise"},{name:"Poly",type:"Poly"},{name:"Hihat",type:"Sampler"}],N=function(e,t){C&&w.changeStep(t,e)},q=function(){var e=document.querySelector(".start-span");C?b.i.toggle():(w=new x(k),y(60),b.i.start(),C=!0),"start"===e.innerHTML?e.innerHTML="stop":e.innerHTML="start"},y=function(e){b.i.bpm.value=e,document.querySelector(".reglage-svg-Bpm").setAttribute("transform","rotate("+2*(e-60)+")"),document.querySelector(".reglage-p-Bpm").innerText=Math.ceil(b.i.bpm.value)+" bpm"},L=n(7),S=function(e){var t=e.name;return Object(L.jsx)("div",{className:t+"-Screen blink-"+t,children:Object(L.jsx)("canvas",{id:t+"-Screen",className:t+"-canvas"})})},M=function(e){var t=e.label,n=e.labelClass;return Object(L.jsx)("label",{className:"label "+n,children:t})},R=n.p+"static/media/SequenceStep.3e84c90a.svg",T=function(){return Object(L.jsx)("img",{src:R,alt:""})},_=function(e){var t=e.changeStep;return Object(L.jsxs)("div",{className:"sequence",children:[Object(L.jsx)("div",{className:"sequence-buttons sequence-grid",children:[0,1,2,3,4,5,6,7].map((function(e){return Object(L.jsx)("button",{className:"sequence-step",onClick:function(){return t(e)},children:Object(L.jsx)(T,{})},e+"b")}))}),Object(L.jsx)("div",{className:"sequence-patterns sequence-grid"})]})},F=function(e){var t=e.blinkName;return Object(L.jsx)("div",{className:"blink-meter blink-"+t,children:Object(L.jsx)("div",{className:"blink-meter-thing"})})},B=function(e){var t=e.channel,n=e.changeStep;return Object(L.jsxs)("div",{className:"sequence-channel",children:[Object(L.jsxs)("div",{className:"sequence-panel",children:[Object(L.jsx)(M,{label:t,labelClass:"sequence-label"}),Object(L.jsx)(F,{blinkName:t})]}),Object(L.jsx)(_,{changeStep:function(e){return n(e,t+"Channel")}})]})},H=n.p+"static/media/StartButton.3e0f588c.svg",P=function(){return Object(L.jsx)("img",{className:"start-img",src:H,alt:""})},Z=function(e){var t=e.control,n=e.onChange,c=e.min,s=e.max,a=e.step;return Object(L.jsxs)("div",{className:"reglage-wrapper",children:[Object(L.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"reglage-svg",children:[Object(L.jsx)("circle",{cx:"67",cy:"67",r:"67",fill:"#919995"}),Object(L.jsx)("circle",{cx:"67",cy:"67",r:"65.8",stroke:"#3A3331",strokeOpacity:"0.57",strokeWidth:"2.4"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M68 5.47495C67.7058 4.53689 67.3643 4 67 4C66.6357 4 66.2942 4.53689 66 5.47495V22.6854L67 25L68 22.6854V5.47495Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66 128.595C66.2942 129.489 66.6357 130 67 130C67.3643 130 67.7058 129.489 68 128.595V111.204L67 109L66 111.204V128.595Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M128.595 68C129.489 67.7058 130 67.3643 130 67C130 66.6357 129.489 66.2942 128.595 66H111.204L109 67L111.204 68H128.595Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.55259 66C4.56516 66.2942 4.00001 66.6357 4.00001 67C4.00001 67.3643 4.56516 67.7058 5.55259 68H22.5635L25 67L25 67V67L25 67L22.5635 66H5.55259Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M106.27 30.4075C106.694 29.5678 106.814 28.9647 106.556 28.7071C106.299 28.4495 105.696 28.5696 104.856 28.9933L92.5588 41.2905L91.7071 43.5563L93.973 42.7047L106.27 30.4075Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.4075 28.9933C29.5678 28.5695 28.9647 28.4495 28.7071 28.7071C28.4495 28.9647 28.5696 29.5677 28.9933 30.4075L41.2905 42.7047L43.5563 43.5563L42.7047 41.2904L30.4075 28.9933Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.9933 104.856C28.5696 105.696 28.4495 106.299 28.7071 106.556C28.9647 106.814 29.5678 106.694 30.4075 106.27L42.7047 93.973L43.5564 91.7071L41.2905 92.5587L28.9933 104.856Z",fill:"#2F3733"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M104.856 106.27C105.696 106.694 106.299 106.814 106.556 106.556C106.814 106.299 106.694 105.696 106.27 104.856L93.973 92.5588L91.7071 91.7071L92.5588 93.973L104.856 106.27Z",fill:"#2F3733"})]}),Object(L.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"reglage-svg reglage-svg-"+t,transform:"rotate(0)",children:[Object(L.jsx)("circle",{cx:"67",cy:"67",r:"44.6",fill:"#070011",stroke:"#3A3331",strokeWidth:"0.8"}),Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M111.264 68C111.732 67.7058 112 67.3643 112 67C112 66.6357 111.732 66.2942 111.264 66H102.155L101 67L102.155 68H111.264Z",fill:"#DC5765"})]}),Object(L.jsx)("input",{className:"reglage-input reglage-input-"+t,type:"range",min:c,max:s,step:a,onChange:function(e){return n(e.target.value)}}),Object(L.jsx)("p",{className:"reglage-p-"+t,children:"60 bpm"})]})},I=n(8),A=(n(33),function(e){var t=e.front,n=e.back,s=Object(c.useState)("cube"),a=Object(I.a)(s,2),i=a[0],r=a[1],l=function(){r(""===i?"cube-back":"")};return Object(L.jsx)("div",{className:"scene-wrapper",children:Object(L.jsx)("div",{className:"scene",children:Object(L.jsxs)("div",{className:"cube "+i,children:[Object(L.jsxs)("div",{className:"cube__face cube__face--front",children:[Object(L.jsx)("button",{onClick:function(){return l()},children:"sample"}),t]}),Object(L.jsxs)("div",{className:"cube__face cube__face--back",children:[Object(L.jsx)("button",{onClick:function(){return l()},children:"bpm"}),n]}),Object(L.jsx)("div",{className:"cube__face cube__face--right",children:"right"}),Object(L.jsx)("div",{className:"cube__face cube__face--left",children:"left"}),Object(L.jsx)("div",{className:"cube__face cube__face--top",children:"top"}),Object(L.jsx)("div",{className:"cube__face cube__face--bottom",children:"bottom"})]})})})}),D=function(){return Object(L.jsxs)("div",{className:"sample-recorder",children:[Object(L.jsx)("button",{className:"recorder-start-button",children:"start"}),Object(L.jsx)("button",{className:"recorder-stop-button",children:"stop"})]})},V=function(){return Object(L.jsxs)("div",{className:"funk-box",children:[Object(L.jsx)(A,{front:Object(L.jsx)(Z,{control:"Bpm",onChange:function(e){return y(e)},min:"60",max:"240",step:"1"}),back:Object(L.jsx)(D,{})}),Object(L.jsxs)("h1",{children:[Object(L.jsx)("span",{className:"h1a",children:"FUNK"}),Object(L.jsx)("span",{className:"h1a",children:"BOX"})]}),Object(L.jsxs)("div",{className:"sequence-container",children:[Object(L.jsx)(B,{channel:"Kick",changeStep:function(e,t){return N(e,t)}}),Object(L.jsx)(B,{channel:"Hihat",changeStep:function(e,t){return N(e,t)}}),Object(L.jsx)(B,{channel:"Noise",changeStep:function(e,t){return N(e,t)}}),Object(L.jsx)(B,{channel:"Poly",changeStep:function(e,t){return N(e,t)}})]}),Object(L.jsx)(S,{name:"Main"}),Object(L.jsxs)("button",{className:"start-button",onClick:function(){return q()},children:[Object(L.jsx)(P,{}),Object(L.jsxs)("span",{className:"start-span-wrapper",children:[Object(L.jsx)("span",{}),Object(L.jsx)("span",{className:"start-span",children:"start"})]})]})]})},E=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(L.jsx)("div",{className:"funk-box-wrapper",children:Object(L.jsx)(V,{})})}}]),n}(c.Component),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))},J=function(){return Object(L.jsx)("footer",{className:"footer"})},U=function(){return Object(L.jsx)("header",{className:"header"})};i.a.render(Object(L.jsxs)(s.a.StrictMode,{children:[Object(L.jsx)(U,{}),Object(L.jsx)(E,{}),Object(L.jsx)(J,{})]}),document.getElementById("root")),K()}},[[34,1,2]]]);
//# sourceMappingURL=main.a137c07a.chunk.js.map